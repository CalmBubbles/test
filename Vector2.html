<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
        
        <style>
body { margin : 0; }

#text
{
    width : 85vw;
    min-height : 20px;
    padding : 20px;
    background : black;
    color : white;
    font-size : 20px;
}

button
{
    width : 100vw;
    height : 60px;
}

#scene
{
    position : fixed;
    display : flex;
    flex-direction : column;
    top : 0;
    bottom : 0;
    left : 0;
    right : 0;
    background : gray;
}

#scene > *
{
    position : absolute;
}

img
{
    image-rendering : -webkit-optimize-contrast;
    image-rendering : crisp-edges;
    image-rendering : pixelated;
    -ms-interpolation-mode : nearest-neighbor;
}
        </style>
    </head>
    
    <body>
        <!--<div id="text"></div>
        
        <button onclick="test = Vector2.zero()">ZERO</button>
        <button onclick="test = Vector2.one()">ONE</button>
        <button onclick="test = new Vector2(Math.random() * 25, Math.random() * 25)">SHIFT</button>
        <button onclick="test = Vector2.up()">UP</button>
        <button onclick="test = Vector2.down()">DOWN</button>
        <button onclick="test = Vector2.left()">LEFT</button>
        <button onclick="test = Vector2.right()">RIGHT</button>
        <button onclick="test.Normalize()">NORMALIZE</button>-->
        
        <div id="scene">
            <img src="https://calmbubbles.github.io/img/icon.png" style="display : block; width : 60px;">
            <img id="e" src="https://calmbubbles.github.io/img/icon.png" style="display : block; width : 60px;">
        </div>
        
        <script src="https://blankengine.github.io/js/BlankEngine.js" type="text/javascript"></script>
        <script>
let text = document.querySelector("#text");
let obj_bubble = document.querySelector("#e");
var test;
var axis;
var speed = 1;

window.onload = () => {
    test = new Vector2();
    axis = new Vector2();
    requestUpdate();
};

document.addEventListener("keydown", event => {
    switch (event.key)
    {
        case "ArrowUp":
            event.preventDefault();
            axis.y = -speed;
            break;
        case "ArrowDown":
            event.preventDefault();
            axis.y = speed;
            break;
        case "ArrowLeft":
            event.preventDefault();
            axis.x = -speed;
            break;
        case "ArrowRight":
            event.preventDefault();
            axis.x = speed;
            break;
    }
    
    if (event.key === "Shift")
    {
        event.preventDefault();
        speed *= 2;
    }
});

document.addEventListener("keyup", event => {
    switch (event.key)
    {
        case "ArrowUp":
        case "ArrowDown":
        case "ArrowLeft":
        case "ArrowRight":
            event.preventDefault();
            axis = Vector2.zero();
            break;
    }
    
    if (event.key === "Shift")
    {
        event.preventDefault();
        speed /= 2;
    }
});

function requestUpdate ()
{
    requestAnimationFrame(update.bind(this));
}

function update ()
{
    let testOld = test;
    var testDif = new Vector2();
    
    test.x += axis.x;
    test.y += axis.y;
    
    testDif.x = Math.abs(testOld.x - test.x);
    testDif.y = Math.abs(testOld.y - test.y);

    //text.innerHTML = `${test.toString()}<br>${test.magnitude}<br>${test.sqrMagnitude}<br>${test.normalized.toString()}`;
    
    obj_bubble.style.left = `${test.x * 2}px`;
    obj_bubble.style.top = `${test.y * 2}px`;
    
    console.clear();
    console.log(testDif.toString());
    
    /*if (test === testOld)
    {
        obj_bubble.style.transform = "none";
        obj_bubble.style.transition = "transform 0.5s";
    }
    else if ()
    {
        obj_bubble.style.transform = "none";
        obj_bubble.style.transition = "transform 0.5s";
    }*/
    
    requestUpdate();
}
        </script>
    </body>
</html>